# VRChat Fishing Bot

Автоматический бот для рыбалки в VRChat, который выполняет полный цикл рыбалки: заброс удочки, ожидание клева по звуковому сигналу и подсечку рыбы.

## Возможности

- ✅ Автоматический поиск и активация окна VRChat
- ✅ **Прямой захват звука из процесса VRChat** (не требует настройку микрофона!)
- ✅ **Визуализация громкости в реальном времени** с графиком и индикаторами
- ✅ Заброс удочки с настраиваемым временем зажатия клавиши E
- ✅ Мониторинг звука в реальном времени для определения клева
- ✅ Автоматическая подсечка с минимальным временем удержания
- ✅ Графический интерфейс с настройками
- ✅ Подробное логирование всех действий
- ✅ Интеллектуальная фильтрация звуков с защитой от ложных срабатываний
- ✅ Динамическая настройка порога громкости с мгновенным отображением

## Установка

### Шаг 1: Установка Python
1. Скачайте и установите Python 3.8+ с официального сайта: https://www.python.org/downloads/
2. При установке обязательно отметьте "Add Python to PATH"

### Шаг 2: Установка зависимостей
Откройте командную строку (cmd) или PowerShell в папке с ботом и выполните:

```bash
pip install -r requirements.txt
```

Если возникают проблемы с установкой pyaudio на Windows, используйте:

```bash
pip install pipwin
pipwin install pyaudio
```

### Шаг 3: Проверка звука VRChat
**Важно:** Бот теперь захватывает звук напрямую из процесса VRChat!
1. Убедитесь, что VRChat воспроизводит звук (проверьте настройки громкости Windows)
2. Не требуется настройка микрофона или виртуального аудио микшера
3. Бот автоматически найдет аудио сессию VRChat

## Запуск

1. Запустите VRChat и зайдите в мир с рыбалкой
2. **Убедитесь, что VRChat воспроизводит звук** (можно проверить в микшере громкости Windows)
3. Подойдите к месту рыбалки и убедитесь, что можете ловить рыбу вручную
4. Запустите бота:
   ```bash
   python vrchat_fishing_bot.py
   ```
5. Настройте параметры в интерфейсе бота
6. Нажмите "Запустить бота"

## Настройки

### Время заброса (сек)
- **По умолчанию**: 0.3 секунды
- **Описание**: Время удержания клавиши E для заброса удочки
- **Рекомендации**: 0.2-0.5 секунды в зависимости от мира

### Минимальное время подсечки (сек)
- **По умолчанию**: 10 секунд
- **Описание**: Минимальное время удержания E при подсечке перед прослушиванием звука падения рыбы
- **Рекомендации**: 8-15 секунд в зависимости от типа рыбы

### Порог громкости
- **По умолчанию**: 0.15
- **Описание**: Чувствительность к звукам клева (от 0.01 до 1.0)
- **Рекомендации**: 
  - 0.05-0.15 для тихих звуков
  - 0.15-0.30 для обычных звуков
  - 0.30+ для громких звуков
- **Примечание**: Бот использует прямой захват звука из VRChat, поэтому значения ниже чем при захвате с микрофона

## Как работает бот

1. **Поиск VRChat**: Бот автоматически находит окно и процесс VRChat
2. **Подключение к аудио**: Захватывает аудиопоток напрямую из процесса VRChat (не через микрофон!)
3. **Заброс**: Активирует окно VRChat и зажимает клавишу E на указанное время
4. **Ожидание клева**: Анализирует громкость звука VRChat в реальном времени, ожидая звук клева
5. **Подсечка**: При обнаружении звука начинает удерживать E для подсечки
6. **Завершение**: Ждет звук падения рыбы в ведро, затем повторяет цикл

## Решение проблем

### Бот не находит VRChat
- Убедитесь, что VRChat запущен
- Попробуйте изменить заголовок окна VRChat
- Запустите бота от имени администратора

### Не срабатывает обнаружение звука
- **Убедитесь, что VRChat воспроизводит звук** - проверьте микшер громкости Windows
- Откройте "Параметры звука" → "Микшер громкости приложений" и убедитесь, что VRChat не отключен
- Настройте порог громкости (попробуйте снизить до 0.05-0.10)
- **НЕ требуется настройка микрофона** - бот берет звук напрямую из VRChat!
- Если аудио сессия не найдена, перезапустите VRChat с включенным звуком

### Клавиша E не нажимается
- Запустите бота от имени администратора
- Убедитесь, что VRChat в оконном или оконном без рамки режиме
- Проверьте, что окно VRChat активно

### Бот зависает или работает некорректно
- Перезапустите бота
- Проверьте настройки времени
- Убедитесь, что VRChat находится в режиме рыбалки

## Системные требования

- **ОС**: Windows 10/11
- **Python**: 3.8+
- **Оперативная память**: 512 МБ свободной памяти
- **Микрофон**: Любой микрофон для захвата аудио

## Важные замечания

⚠️ **Внимание**: Использование ботов может нарушать правила VRChat. Используйте на свой страх и риск.

⚠️ **Безопасность**: Не оставляйте бота без присмотра на длительное время.

⚠️ **Производительность**: Бот использует минимальные ресурсы CPU для анализа аудио.

✅ **Преимущества нового метода**: Не требуется настройка микрофона, виртуальных аудио драйверов или перенаправления звука!

## ~~Настройка аудио (дополнительно)~~ БОЛЬШЕ НЕ ТРЕБУЕТСЯ!

**Старый метод (не нужен):** Раньше требовалось настраивать виртуальный аудио микшер типа VoiceMeeter.

**Новый метод:** Бот теперь захватывает звук напрямую из процесса VRChat через Windows Audio Session API. Никаких дополнительных настроек не требуется - просто убедитесь, что VRChat воспроизводит звук!

## Лицензия

Этот проект предоставляется "как есть" без каких-либо гарантий. Автор не несет ответственности за любые последствия использования данного ПО.

## Поддержка

При возникновении проблем:
1. Проверьте лог активности в интерфейсе бота
2. Убедитесь, что все зависимости установлены
3. Попробуйте изменить настройки
4. Перезапустите VRChat и бота